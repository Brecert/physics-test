{"version":3,"sources":["index.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA,IAAA,QAAA,aAAA,YAAA;AAIC,aAAA,KAAA,CAAY,CAAZ,EAAmB,CAAnB,EAAwB;AAAZ,YAAA,MAAA,KAAA,CAAA,EAAA;AAAA,gBAAA,CAAA;AAAK;AAAE,YAAA,MAAA,KAAA,CAAA,EAAA;AAAA,gBAAA,CAAA;AAAK;AACvB,aAAK,CAAL,GAAS,CAAT;AACA,aAAK,CAAL,GAAS,CAAT;AACA;AAED,UAAA,SAAA,CAAA,IAAA,GAAA,UAAM,GAAN,EAAqC,IAArC,EAA6C;AAAR,YAAA,SAAA,KAAA,CAAA,EAAA;AAAA,mBAAA,CAAA;AAAQ;AAC5C,YAAI,SAAJ;AACA,YAAI,GAAJ,CAAQ,KAAK,CAAb,EAAgB,KAAK,CAArB,EAAwB,IAAxB,EAA8B,CAA9B,EAAiC,KAAK,EAAL,GAAU,CAA3C,EAA8C,IAA9C;AACA,YAAI,IAAJ;AACA,KAJD;AAKD,WAAA,KAAA;AAdA,CAAA,EAAA;AAgBA,IAAA,UAAA,aAAA,YAAA;AAGC,aAAA,OAAA,GAAA;AACC,aAAK,GAAL,GAAW,IAAI,KAAJ,CAAU,CAAV,EAAa,CAAb,CAAX;AACA;AACF,WAAA,OAAA;AANA,CAAA,EAAA;AAQA,IAAA,QAAA,aAAA,UAAA,MAAA,EAAA;AAAoB,cAAA,KAAA,EAAA,MAAA;AAInB,aAAA,KAAA,CAAa,IAAb,EAA0B,EAA1B,EAAmC;AAAnC,YAAA,QACC,OAAA,IAAA,CAAA,IAAA,KAAO,IADR;AAEC,cAAK,IAAL,GAAY,IAAZ;AACA,cAAK,EAAL,GAAU,EAAV;;AACA;AAED,UAAA,SAAA,CAAA,QAAA,GAAA,UAAU,KAAV,EAAsB;AACrB,YAAI,OAAO,KAAK,IAAhB;AACA,YAAI,KAAK,KAAK,EAAd;AAEA,aAAK,CAAL,IAAU,KAAK,GAAL,CAAS,CAAnB;AACA,aAAK,CAAL,IAAU,KAAK,GAAL,CAAS,CAAnB;AAEA,WAAG,CAAH,IAAQ,KAAK,GAAL,CAAS,CAAjB;AACA,WAAG,CAAH,IAAQ,KAAK,GAAL,CAAS,CAAjB;AAEA,YAAI,KAAK,CAAL,GAAS,MAAM,CAAf,IAAoB,MAAM,CAAN,GAAU,GAAG,CAAjC,IAAsC,KAAK,CAAL,GAAS,MAAM,CAArD,IAA0D,MAAM,CAAN,GAAU,GAAG,CAA3E,EAA8E;AAC7E,mBAAO,IAAP;AACA,SAFD,MAEO;AACN,mBAAO,KAAP;AACA;AACD,KAfD;AAiBA,UAAA,SAAA,CAAA,IAAA,GAAA,UAAM,GAAN,EAAS;AACR,YAAI,SAAJ;AACA,YAAI,IAAJ,CAAS,KAAK,GAAL,CAAS,CAAlB,EAAqB,KAAK,GAAL,CAAS,CAA9B,EAAiC,KAAK,EAAL,CAAQ,CAAR,GAAY,KAAK,IAAL,CAAU,CAAvD,EAA0D,KAAK,EAAL,CAAQ,CAAR,GAAY,KAAK,IAAL,CAAU,CAAhF;AACA,YAAI,MAAJ;AACA,KAJD;AAKD,WAAA,KAAA;AAhCA,CAAA,CAAoB,OAApB,CAAA;AAkCA,IAAA,YAAA,aAAA,UAAA,MAAA,EAAA;AAAwB,cAAA,SAAA,EAAA,MAAA;AAEvB,aAAA,SAAA,CAAa,MAAb,EAAwB;AAAX,YAAA,WAAA,KAAA,CAAA,EAAA;AAAA,qBAAA,EAAA;AAAW;AAAxB,YAAA,QACC,OAAA,IAAA,CAAA,IAAA,KAAO,IADR;AAEC,cAAK,MAAL,GAAc,MAAd;;AACA;AAED,cAAA,SAAA,CAAA,WAAA,GAAA,YAAA;AACC,YAAM,MAAM,IAAI,KAAJ,EAAZ;AACA,YAAM,MAAM,IAAI,KAAJ,EAAZ;AAEA,aAAoB,IAAA,KAAA,CAAA,EAAA,KAAA,KAAK,MAAzB,EAAoB,KAAA,GAAA,MAApB,EAAoB,IAApB,EAAiC;AAA5B,gBAAM,UAAK,GAAA,EAAA,CAAX;AACJ,gBAAI,QAAM,CAAN,GAAU,IAAI,CAAlB,EAAqB;AACpB,oBAAI,CAAJ,GAAQ,QAAM,CAAd;AACA,aAFD,MAEO,IAAI,QAAM,CAAN,GAAU,IAAI,CAAlB,EAAqB;AAC3B,oBAAI,CAAJ,GAAQ,QAAM,CAAd;AACA;AAED,gBAAI,QAAM,CAAN,GAAU,IAAI,CAAlB,EAAqB;AACpB,oBAAI,CAAJ,GAAQ,QAAM,CAAd;AACA,aAFD,MAEO,IAAI,QAAM,CAAN,GAAU,IAAI,CAAlB,EAAqB;AAC3B,oBAAI,CAAJ,GAAQ,QAAM,CAAd;AACA;AACD;AACD,YAAI,CAAJ,IAAS,KAAK,GAAL,CAAS,CAAlB;AACA,YAAI,CAAJ,IAAS,KAAK,GAAL,CAAS,CAAlB;AAEA,YAAI,CAAJ,IAAS,KAAK,GAAL,CAAS,CAAlB;AACA,YAAI,CAAJ,IAAS,KAAK,GAAL,CAAS,CAAlB;AAEA,YAAM,MAAM,IAAI,KAAJ,CAAU,GAAV,EAAe,GAAf,CAAZ;AACA,eAAO,GAAP;AACA,KAzBD;AA2BA,cAAA,SAAA,CAAA,QAAA,GAAA,UAAS,KAAT,EAAqB;AACpB,YAAI,KAAK,WAAL,GAAmB,QAAnB,CAA4B,KAA5B,CAAJ,EAAwC;AACvC,gBAAI,SAAS,KAAb;AACA,iBAAK,IAAI,IAAI,CAAR,EAAW,IAAI,KAAK,MAAL,CAAY,MAAZ,GAAqB,CAAzC,EAA4C,IAAI,KAAK,MAAL,CAAY,MAA5D,EAAoE,IAAI,GAAxE,EAA6E;AAC5E,oBAAI,MAAM,KAAK,MAAL,CAAY,CAAZ,CAAV;AACA,oBAAI,UAAU,KAAK,MAAL,CAAY,CAAZ,CAAd;AAEA,oBAAI,CAAJ,IAAS,KAAK,GAAL,CAAS,CAAlB;AACA,oBAAI,CAAJ,IAAS,KAAK,GAAL,CAAS,CAAlB;AACA,wBAAQ,CAAR,IAAa,KAAK,GAAL,CAAS,CAAtB;AACA,wBAAQ,CAAR,IAAa,KAAK,GAAL,CAAS,CAAtB;AAEI,oBAAK,IAAI,CAAJ,GAAQ,MAAM,CAAf,IAAsB,QAAQ,CAAR,GAAY,MAAM,CAAzC,IAAiD,MAAM,CAAN,GAAU,CAAC,QAAQ,CAAR,GAAY,IAAI,CAAjB,KAAuB,MAAM,CAAN,GAAU,IAAI,CAArC,KAA2C,QAAQ,CAAR,GAAY,IAAI,CAA3D,IAAgE,IAAI,CAAlI,EAAuI,SAAS,CAAC,MAAV;AAC3I;AACD,mBAAO,MAAP;AACA,SAdD,MAcO;AACN,mBAAO,KAAP;AACA;AACD,KAlBD;AAoBA,cAAA,SAAA,CAAA,IAAA,GAAA,UAAK,GAAL,EAAQ;AACP,YAAI,SAAJ;AACA,aAAkB,IAAA,KAAA,CAAA,EAAA,KAAA,KAAK,MAAvB,EAAkB,KAAA,GAAA,MAAlB,EAAkB,IAAlB,EAA+B;AAA1B,gBAAI,UAAK,GAAA,EAAA,CAAT;AACJ,gBAAI,MAAJ,CAAW,QAAM,CAAN,GAAU,KAAK,GAAL,CAAS,CAA9B,EAAiC,QAAM,CAAN,GAAU,KAAK,GAAL,CAAS,CAApD;AACA;AACD,YAAI,MAAJ,CAAW,KAAK,MAAL,CAAY,CAAZ,EAAe,CAAf,GAAmB,KAAK,GAAL,CAAS,CAAvC,EAA0C,KAAK,MAAL,CAAY,CAAZ,EAAe,CAAf,GAAmB,KAAK,GAAL,CAAS,CAAtE;AACA,YAAI,MAAJ;AACA,KAPD;AASD,WAAA,SAAA;AA/DA,CAAA,CAAwB,OAAxB,CAAA;AAiEA,IAAA,SAAA,aAAA,YAAA;AAKC,aAAA,MAAA,CAAY,CAAZ,EAAmB,CAAnB,EAAwB;AAAZ,YAAA,MAAA,KAAA,CAAA,EAAA;AAAA,gBAAA,CAAA;AAAK;AAAE,YAAA,MAAA,KAAA,CAAA,EAAA;AAAA,gBAAA,CAAA;AAAK;AACvB,aAAK,GAAL,GAAW,IAAI,KAAJ,CAAU,CAAV,EAAa,CAAb,CAAX;AACA,aAAK,MAAL,GAAc,EAAd;AACA,aAAK,QAAL,GAAgB,IAAI,KAAJ,CAAU,CAAV,EAAa,CAAb,CAAhB;AACA;AAED,WAAA,SAAA,CAAA,YAAA,GAAA,UAAa,MAAb,EAA2B;AAC1B,aAAK,QAAL,CAAc,CAAd,IAAmB,KAAK,MAAL,GAAc,MAAjC;AACA,KAFD;AAIA,WAAA,SAAA,CAAA,WAAA,GAAA,YAAA;AACC,aAAK,GAAL,CAAS,CAAT,IAAc,KAAK,QAAL,CAAc,CAA5B;AACA,aAAK,GAAL,CAAS,CAAT,IAAc,KAAK,QAAL,CAAc,CAA5B;AAEA,aAAK,QAAL,GAAgB,IAAI,KAAJ,CAAU,CAAV,EAAa,CAAb,CAAhB;AACA,KALD;AAOA,WAAA,SAAA,CAAA,IAAA,GAAA,UAAM,GAAN,EAAmC;AAClC,aAAK,GAAL,CAAS,IAAT,CAAc,GAAd;AACA,KAFD;AAGD,WAAA,MAAA;AAzBA,CAAA,EAAA;AA4BC,IAAI,aAAgC,SAAS,cAAT,CAAwB,YAAxB,CAApC;AACA,IAAI,aAAgC,SAAS,cAAT,CAAwB,YAAxB,CAApC;AACA,IAAI,MAAM,WAAW,UAAX,CAAsB,IAAtB,CAAV;AACA,IAAI,MAAM,WAAW,UAAX,CAAsB,IAAtB,CAAV;AAED,IAAI,QAAiB,EAArB;AACA,MAAM,CAAN,IAAW,IAAI,KAAJ,CAAU,CAAV,EAAY,CAAZ,CAAX;AACA,MAAM,CAAN,IAAW,IAAI,KAAJ,CAAU,GAAV,EAAc,EAAd,CAAX;AACA,MAAM,CAAN,IAAW,IAAI,KAAJ,CAAU,GAAV,EAAc,GAAd,CAAX;AACA,MAAM,CAAN,IAAW,IAAI,KAAJ,CAAU,EAAV,EAAa,GAAb,CAAX;AAEA,IAAI,WAAJ,GAAkB,OAAlB;AACA,IAAI,QAAQ,IAAI,SAAJ,CAAc,KAAd,CAAZ;AACA,MAAM,GAAN,CAAU,CAAV,GAAc,GAAd;AACA,MAAM,GAAN,CAAU,CAAV,GAAc,GAAd;AACA,MAAM,IAAN,CAAW,GAAX;AAEA,IAAI,SAAJ,GAAgB,KAAhB;AACA,IAAI,QAAQ,IAAI,KAAJ,CAAU,GAAV,EAAe,GAAf,CAAZ;AACA,MAAM,IAAN,CAAW,GAAX;AAEA,IAAI,OAAO,IAAI,MAAJ,CAAW,GAAX,EAAgB,EAAhB,CAAX;AACA,KAAK,IAAL,CAAU,GAAV;AAEA,SAAA,KAAA,CAAe,EAAf,EAAiB;AACf,WAAO,IAAI,OAAJ,CAAY,UAAA,OAAA,EAAO;AAAI,eAAA,WAAW,OAAX,EAAoB,EAApB,CAAA;AAAuB,KAA9C,CAAP;AACD;AAED,SAAA,OAAA,GAAA;;;;;AACC,wBAAI,SAAJ,CAAc,CAAd,EAAiB,CAAjB,EAAoB,WAAW,KAA/B,EAAsC,WAAW,MAAjD;AACA,yBAAK,YAAL,CAAkB,CAAlB;AACA,yBAAK,WAAL;AAEA,4BAAQ,GAAR,CAAY,MAAM,QAAN,CAAe,KAAK,GAApB,CAAZ;AACA,4BAAQ,GAAR,CAAY,KAAK,GAAjB;AAEA,wBAAI,MAAM,QAAN,CAAe,KAAK,GAApB,KAA4B,IAAhC,EAAsC;AACrC,4BAAI,SAAJ,GAAgB,MAAhB;AACA,4BAAI,WAAJ,GAAkB,MAAlB;AACA,qBAHD,MAGO;AACN,4BAAI,SAAJ,GAAgB,KAAhB;AACA,4BAAI,WAAJ,GAAkB,KAAlB;AACA;AAED,yBAAK,IAAL,CAAU,GAAV;AACA,2BAAA,CAAA,CAAA,CAAA,SAAA,EAAM,MAAO,IAAI,EAAL,GAAW,KAAjB,CAAN,CAAA;;AAAA,uBAAA,IAAA;AACA,2BAAO,qBAAP,CAA6B,OAA7B;;;;;AACA;AAED","file":"src.37270ff2.map","sourceRoot":"../src","sourcesContent":["// PVector2D with a nicer name.\nclass Vec2D {\n\tx: number\n\ty: number\n\n\tconstructor(x = 0, y = 0) {\n\t\tthis.x = x\n\t\tthis.y = y\n\t}\n\n\tdraw (ctx: CanvasRenderingContext2D, size = 2) {\n\t\tctx.beginPath()\n\t\tctx.arc(this.x, this.y, size, 0, Math.PI * 2, true);\n\t\tctx.fill()\n\t}\n}\n\nclass Shape2D {\n\tpos: Vec2D\n\n\tconstructor () {\n\t\tthis.pos = new Vec2D(0, 0)\n\t}\n}\n\nclass Box2D extends Shape2D {\n\tfrom: Vec2D\n\tto: Vec2D\n\n\tconstructor (from: Vec2D, to: Vec2D) {\n\t\tsuper()\n\t\tthis.from = from\n\t\tthis.to = to\n\t}\n\n\tcontains (point: Vec2D): boolean {\n\t\tlet from = this.from\n\t\tlet to = this.to\n\n\t\tfrom.x += this.pos.x\n\t\tfrom.y += this.pos.y\n\n\t\tto.x += this.pos.x\n\t\tto.y += this.pos.y \n\n\t\tif (from.x < point.x && point.x < to.x && from.y < point.y && point.y < to.y) {\n\t\t\treturn true\t\n\t\t} else {\n\t\t\treturn false\n\t\t}\n\t}\n\n\tdraw (ctx) {\n\t\tctx.beginPath()\n\t\tctx.rect(this.pos.x, this.pos.y, this.to.x - this.from.x, this.to.y - this.from.x)\n\t\tctx.stroke()\n\t}\n}\n\nclass Polygon2D extends Shape2D {\n\tpoints: Vec2D[]\n\tconstructor (points = []) {\n\t\tsuper()\n\t\tthis.points = points\n\t}\n\n\tboundingBox(): Box2D {\n\t\tconst min = new Vec2D\n\t\tconst max = new Vec2D\n\n\t\tfor (const point of this.points) {\n\t\t\tif (point.x < min.x) {\n\t\t\t\tmin.x = point.x\n\t\t\t} else if (point.x > max.x) {\n\t\t\t\tmax.x = point.x\n\t\t\t}\n\n\t\t\tif (point.y < min.y) {\n\t\t\t\tmin.y = point.y\n\t\t\t} else if (point.y > max.y) {\n\t\t\t\tmax.y = point.y\n\t\t\t}\n\t\t}\n\t\tmin.x += this.pos.x\n\t\tmax.x += this.pos.x\n\n\t\tmin.y += this.pos.y\n\t\tmax.y += this.pos.y\n\n\t\tconst box = new Box2D(min, max)\n\t\treturn box\n\t}\n\n\tcontains(point: Vec2D): boolean {\n\t\tif (this.boundingBox().contains(point)) {\n\t\t\tlet inside = false\n\t\t\tfor (let i = 0, n = this.points.length - 1; i < this.points.length; n = i++) {\n\t\t\t\tlet vec = this.points[i]\n\t\t\t\tlet vecNext = this.points[n]\n\n\t\t\t\tvec.x += this.pos.x\n\t\t\t\tvec.y += this.pos.y\n\t\t\t\tvecNext.x += this.pos.x\n\t\t\t\tvecNext.y += this.pos.y\n\n        if(((vec.y > point.y) != (vecNext.y > point.y)) && (point.x < (vecNext.x - vec.x) * (point.y - vec.y) / (vecNext.y - vec.y) + vec.x) ) inside = !inside;\n\t\t\t}\n\t\t\treturn inside\n\t\t} else {\n\t\t\treturn false\n\t\t}\n\t}\n\n\tdraw(ctx) {\n\t\tctx.beginPath()\n\t\tfor (let point of this.points) {\n\t\t\tctx.lineTo(point.x + this.pos.x, point.y + this.pos.y)\n\t\t}\n\t\tctx.lineTo(this.points[0].x + this.pos.x, this.points[0].y + this.pos.y)\n\t\tctx.stroke()\n\t}\n\n}\n\nclass Entity {\n\tpos: Vec2D\n\tweight: number\n\tvelocity: Vec2D\n\n\tconstructor(x = 0, y = 0) {\n\t\tthis.pos = new Vec2D(x, y)\n\t\tthis.weight = 10\n\t\tthis.velocity = new Vec2D(0, 0)\n\t}\n\n\tapplyGravity(amount: number) {\n\t\tthis.velocity.y += this.weight * amount\n\t}\n\n\tapplyForces() {\n\t\tthis.pos.x += this.velocity.x\n\t\tthis.pos.y += this.velocity.y\n\n\t\tthis.velocity = new Vec2D(0, 0)\n\t}\n\n\tdraw (ctx: CanvasRenderingContext2D) {\n\t\tthis.pos.draw(ctx)\n\t}\n}\n\n\n var background = <HTMLCanvasElement>document.getElementById(\"background\")\n var foreground = <HTMLCanvasElement>document.getElementById(\"foreground\")\n var btx = background.getContext(\"2d\")\n var ftx = foreground.getContext(\"2d\")\n\nlet stage: Vec2D[] = []\nstage[0] = new Vec2D(0,0)\nstage[1] = new Vec2D(200,30)\nstage[2] = new Vec2D(150,200)\nstage[3] = new Vec2D(50,200)\n\nbtx.strokeStyle = \"white\"\nvar shape = new Polygon2D(stage)\nshape.pos.x = 200\nshape.pos.y = 200\nshape.draw(btx)\n\nbtx.fillStyle = \"red\"\nvar point = new Vec2D(250, 255)\npoint.draw(btx)\n\nvar ball = new Entity(250, 50)\nball.draw(ftx)\n\nfunction sleep(ms) {\n  return new Promise(resolve => setTimeout(resolve, ms));\n}\n\nasync function animate() {\n\tftx.clearRect(0, 0, foreground.width, foreground.height)\n\tball.applyGravity(1)\n\tball.applyForces()\n\n\tconsole.log(shape.contains(ball.pos))\n\tconsole.log(ball.pos)\n\n\tif (shape.contains(ball.pos) == true) {\n\t\tftx.fillStyle = \"blue\"\n\t\tftx.strokeStyle = \"blue\"\n\t} else {\n\t\tftx.fillStyle = \"red\"\n\t\tftx.strokeStyle = \"red\"\n\t}\n\n\tball.draw(ftx)\n\tawait sleep((1 / 60) * 10000)\n\twindow.requestAnimationFrame(animate)\n}\n\nanimate()"]}