{"version":3,"sources":["index.coffee"],"names":[],"mappings":"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","file":"src.0781f6aa.map","sourceRoot":"../src","sourcesContent":["class Vec2D\n\tconstructor: ->\n\t\t@x = 0\n\t\t@y = 0\n\nclass Entity\n\tconstructor: ->\n\t\t@position = new Vec2D(1, 0)\n\t\t@velocity = new Vec2D(0, 1)\n\t\t@mass = 0.1\n\t\t@radius = 15\n\t\t@restitution = -0.7\n\t\t@ecb = @position\n\tdraw: (ctx, vec) ->\n\t\tctx.beginPath()\n\t\tctx.arc(vec.x, vec.y, @radius, Math.PI * 2, true)\n\t\tctx.fill()\n\t\tctx.closePath()\n\nclass Wall\n\tconstructor: ->\n\t\t@pos = new Vec2D(0, 0)\n\t\t@from = -1000\n\t\t@pos2 = 1000\n\t\t@type = \"ground\"\n\nframerate = 1 / 60\nframedelay = framerate * 1000\n\nradius = 15\nCd = 0.47  # Dimensionless\nrho = 1.22 # kg / m^3\nA = Math.PI * radius * radius / (10000) # m^2\nag = 9.81  # m / s^2\n\nmainLoop = (entities, walls, ctx, canvas) ->\n\tfor entity in entities\n\t\tFx = -0.5 * Cd * A * rho * entity.velocity.x * entity.velocity.x * entity.velocity.x / Math.abs(entity.velocity.x)\n\t\tFy = -0.5 * Cd * A * rho * entity.velocity.y * entity.velocity.y * entity.velocity.y / Math.abs(entity.velocity.y)\n\t\t\n\t\tFx = 0 if isNaN(Fx)\n\t\tFy = 0 if isNaN(Fy)\n\n\t\tax = Fx / entity.mass\n\t\tay = ag + (Fy / entity.mass)\n\n\t\tentity.velocity.x += ax * framerate\n\t\tentity.velocity.y += ay * framerate\n\n\t\tentity.position.x += entity.velocity.x * framerate * 100 \n\t\tentity.position.y += entity.velocity.y * framerate * 100\n\t\tconsole.log(entity.position)\n\n\t\tscan(walls, entity)\n\t\tdraw(ctx, canvas, entities)\n\nscan = (walls, entity) ->\n\tfor wall in walls\n\t\tswitch wall.type\n\t\t\twhen \"ground\"\n\t\t\t\tif entity.ecb.y < wall.pos.y\n\t\t\t\t\tif (wall.pos.y - wall.from.y) < entity.ecb.y < (wall.pos.y - wall.to.y)\n\t\t\t\t\t\tentity.velocity.y *= entity.restitution\n\t\t\t\t\t\tentity.position.y = wall.pos.y\n\t\t\ndraw = (ctx, canvas, entities) ->\n\tctx.clearRect(0,0,canvas.width,canvas.height);\n\tfor entity in entities\n\t\tentity.draw(ctx, entity.position)\n\nmain = ->\n\tentities = []\n\tentities.push new Entity\n\n\twalls = []\n\twalls.push new Wall\n\n\tcanvas = document.getElementById(\"canvas\")\n\tctx = canvas.getContext(\"2d\")\n\n\tconsole.log(entities)\n\n\tctx.fillStyle = 'red'\n\tctx.strokeStyle = 'black'\n\tloopTimer = setInterval(mainLoop(entities, walls, ctx, canvas), framedelay)\n\nmain()"]}